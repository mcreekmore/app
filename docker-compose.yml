version: "3"

services:
  frontend:
    build:
      context: "frontend/"
    image: creekmore.io
    # env_file:
    #   - "./vue/.env"
    ports:
      - 1337:3000

  # nginx:
  #   build: ./nginx
  #   image: mattcreekmore/nginx
  #   links:
  #     - backend
  #   ports:
  #     - "80:80"
  #     - "443:443"
  #     #- "3000:3000"
  #   volumes:
  #     - ./frontend/dist:/usr/share/nginx/html
  #     # DEV: nginx.dev.conf
  #     # PROD: nginx.ssh.conf
  #     - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
  #     #- ./nginx/default:/etc/nginx/sites-available/default
  #     # CERTS
  #     #- /etc/letsencrypt:/etc/letsencrypt
  #     # CERTBOT
  #     #- ./data/certbot/conf:/etc/letsencrypt
  #     #- ./data/certbot/www:/var/www/certbot
  #   command: [nginx-debug, "-g", "daemon off;"]

  #certbot:
  #  image: certbot/certbot
  #  volumes:
  #    - ./data/certbot/conf:/etc/letsencrypt
  #    - ./data/certbot/www:/var/www/certbot

  # backend:
  #   build: ./backend
  #   image: mattcreekmore/backend
  #   volumes:
  #     - ./backend:/data
  #   depends_on:
  #     - mongo
  #   ports:
  #     - "3000:3000"
  #   expose:
  #     - "3000"
  #   environment:
  #     - DATABASE_URL=mongo:27017
  # mongo:
  #   image: mongo
  #   ports:
  #     - 27017:27017
  #   volumes:
  #     - ./db:/data/db
  # client:
  #   build: ./frontend
  #   image: mattcreekmore/client
  #   #environment:
  #   #  - VUE_APP_API_URL=server:3000
  #   ports:
  #     - 8081:80
  #   expose:
  #     - "8081"
  #   volumes:
  #     - ./frontend:/data
  #     # new
  #     #- ./frontend:/app
  #     #- ./frontend/node_modules/app/node_modules
